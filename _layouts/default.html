<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Basic -->
    <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
    <meta name="description" content="{{ page.description | default: site.description }}">
    <meta name="keywords" content="海倫講看脈, 生活觀察, 思考筆記, 個人部落格">
    <meta name="author" content="{{ site.author.name }}">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="{{ page.url | absolute_url }}">

    <!-- Open Graph -->
    <meta property="og:type" content="{{ page.og_type | default: 'website' }}">
    <meta property="og:url" content="{{ page.url | absolute_url }}">
    <meta property="og:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
    <meta property="og:description" content="{{ page.description | default: site.description }}">
    <meta property="og:image" content="{{ '/assets/logo.png' | absolute_url }}">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:site_name" content="{{ site.title }}">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
    <meta name="twitter:description" content="{{ page.description | default: site.description }}">
    <meta name="twitter:image" content="{{ '/assets/logo.png' | absolute_url }}">

    <!-- Favicon -->
    <link rel="icon" href="{{ '/assets/logo.png' | relative_url }}" type="image/png">
    <link rel="apple-touch-icon" href="{{ '/assets/logo.png' | relative_url }}">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="{{ '/css/style.css' | relative_url }}">

    <!-- Google Analytics GA4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D5MX9KHNHV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-D5MX9KHNHV');
    </script>

    {% if page.layout == 'post' %}
    <!-- Article Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "{{ page.title }}",
        "description": "{{ page.description | default: page.excerpt | strip_html | truncate: 160 }}",
        "datePublished": "{{ page.date | date_to_xmlschema }}",
        "author": {
            "@type": "Person",
            "name": "{{ site.author.name }}"
        },
        "publisher": {
            "@type": "Person",
            "name": "{{ site.author.name }}"
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "{{ page.url | absolute_url }}"
        },
        "inLanguage": "zh-TW"
    }
    </script>
    {% endif %}
</head>
<body>
    {% include header.html %}

    <main>
        {{ content }}
    </main>

    <footer>
        {% unless page.layout == 'post' or page.layout == 'post-en' %}
        <div class="support-me">
            <p>{{ site.data.settings.footer_support_text }}</p>
            <a href="https://buymeacoffee.com/helentw" target="_blank" class="bmc-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 6px;">
                    <path d="M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"/>
                </svg>
                Buy me a coffee
            </a>
        </div>
        {% endunless %}
        <p>&copy; {{ site.time | date: '%Y' }} {{ site.data.settings.site_title }}．All Rights Reserved</p>
        <p class="copyright-notice">{{ site.data.settings.footer_copyright }}</p>
    </footer>
</body>
</html>
